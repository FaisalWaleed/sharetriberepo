[{"name":"sql.active_record","payload":{"sql":"SELECT  `communities`.* FROM `communities` WHERE `communities`.`domain` = 'commerce.codingstack.com'  ORDER BY `communities`.`id` ASC LIMIT 1","name":"Community Load","connection_id":18564460,"statement_name":null,"binds":[],"line":609,"filename":"/root/sharetriberepo/app/models/community.rb","method":"find_by_identifier"},"time":"2016-05-16T11:29:07.833+00:00","transaction_id":"5a978a9093b5214652de","end":"2016-05-16T11:29:07.835+00:00","children":[],"duration":1.77343},{"name":"sql.active_record","payload":{"sql":"SELECT COUNT(*) FROM `communities`","name":null,"connection_id":18564460,"statement_name":null,"binds":[],"line":308,"filename":"/root/sharetriberepo/app/controllers/application_controller.rb","method":"perform_redirect"},"time":"2016-05-16T11:29:07.840+00:00","transaction_id":"5a978a9093b5214652de","end":"2016-05-16T11:29:07.841+00:00","children":[],"duration":1.105934},{"name":"sql.active_record","payload":{"sql":"SELECT  `sessions`.* FROM `sessions` WHERE `sessions`.`session_id` = 'cf48c15ff987895945402af6bf948d38'  ORDER BY `sessions`.`id` ASC LIMIT 1","name":"ActiveRecord::SessionStore::Session Load","connection_id":18564460,"statement_name":null,"binds":[],"line":173,"filename":"/root/sharetriberepo/app/controllers/application_controller.rb","method":"fetch_logged_in_user"},"time":"2016-05-16T11:29:07.845+00:00","transaction_id":"5a978a9093b5214652de","end":"2016-05-16T11:29:07.846+00:00","children":[],"duration":1.0659750000000001},{"name":"sql.active_record","payload":{"sql":"SELECT  `people`.* FROM `people` WHERE `people`.`id` = '6IXSNFhhCRFcUfrUXrknbQ'  ORDER BY `people`.`id` ASC LIMIT 1","name":"Person Load","connection_id":18564460,"statement_name":null,"binds":[],"line":173,"filename":"/root/sharetriberepo/app/controllers/application_controller.rb","method":"fetch_logged_in_user"},"time":"2016-05-16T11:29:07.851+00:00","transaction_id":"5a978a9093b5214652de","end":"2016-05-16T11:29:07.851+00:00","children":[],"duration":0.6567339999999999},{"name":"sql.active_record","payload":{"sql":"SELECT  `community_memberships`.* FROM `community_memberships` WHERE `community_memberships`.`person_id` = '6IXSNFhhCRFcUfrUXrknbQ' AND `community_memberships`.`community_id` = 1 AND `community_memberships`.`status` = 'accepted'  ORDER BY `community_memberships`.`id` ASC LIMIT 1","name":"CommunityMembership Load","connection_id":18564460,"statement_name":null,"binds":[],"line":378,"filename":"/root/sharetriberepo/app/controllers/application_controller.rb","method":"fetch_community_membership"},"time":"2016-05-16T11:29:07.856+00:00","transaction_id":"5a978a9093b5214652de","end":"2016-05-16T11:29:07.856+00:00","children":[],"duration":0.597013},{"name":"sql.active_record","payload":{"sql":"BEGIN","name":null,"connection_id":18564460,"statement_name":null,"binds":[],"line":381,"filename":"/root/sharetriberepo/app/controllers/application_controller.rb","method":"fetch_community_membership"},"time":"2016-05-16T11:29:07.865+00:00","transaction_id":"5a978a9093b5214652de","end":"2016-05-16T11:29:07.866+00:00","children":[],"duration":0.73318},{"name":"sql.active_record","payload":{"sql":"INSERT INTO `delayed_jobs` (`handler`, `priority`, `queue`, `run_at`, `created_at`, `updated_at`) VALUES ('--- !ruby/struct:PageLoadedJob\\ncommunity_membership_id: 5\\nhost: commerce.codingstack.com\\n', 5, 'default', '2016-05-16 11:29:07', '2016-05-16 11:29:07', '2016-05-16 11:29:07')","name":"SQL","connection_id":18564460,"statement_name":null,"binds":[],"line":381,"filename":"/root/sharetriberepo/app/controllers/application_controller.rb","method":"fetch_community_membership"},"time":"2016-05-16T11:29:07.871+00:00","transaction_id":"5a978a9093b5214652de","end":"2016-05-16T11:29:07.873+00:00","children":[],"duration":1.5886889999999998},{"name":"sql.active_record","payload":{"sql":"COMMIT","name":null,"connection_id":18564460,"statement_name":null,"binds":[],"line":381,"filename":"/root/sharetriberepo/app/controllers/application_controller.rb","method":"fetch_community_membership"},"time":"2016-05-16T11:29:07.878+00:00","transaction_id":"5a978a9093b5214652de","end":"2016-05-16T11:29:07.879+00:00","children":[],"duration":1.406184},{"name":"sql.active_record","payload":{"sql":"SELECT  `community_customizations`.* FROM `community_customizations` WHERE `community_customizations`.`community_id` = 1 AND `community_customizations`.`locale` = 'en'  ORDER BY `community_customizations`.`id` ASC LIMIT 1","name":"CommunityCustomization Load","connection_id":18564460,"statement_name":null,"binds":[],"line":277,"filename":"/root/sharetriberepo/app/models/community.rb","method":"name"},"time":"2016-05-16T11:29:07.890+00:00","transaction_id":"5a978a9093b5214652de","end":"2016-05-16T11:29:07.891+00:00","children":[],"duration":0.7811629999999999},{"name":"sql.active_record","payload":{"sql":"SELECT  `community_customizations`.* FROM `community_customizations` WHERE `community_customizations`.`community_id` = 1 AND `community_customizations`.`locale` = 'en'  ORDER BY `community_customizations`.`id` ASC LIMIT 1","name":"CommunityCustomization Load","connection_id":18564460,"statement_name":null,"binds":[],"line":119,"filename":"/root/sharetriberepo/app/controllers/application_controller.rb","method":"block in set_locale"},"time":"2016-05-16T11:29:07.897+00:00","transaction_id":"5a978a9093b5214652de","end":"2016-05-16T11:29:07.898+00:00","children":[],"duration":0.703624},{"name":"sql.active_record","payload":{"sql":"SELECT  `community_memberships`.* FROM `community_memberships` WHERE `community_memberships`.`person_id` = '6IXSNFhhCRFcUfrUXrknbQ' LIMIT 1","name":"CommunityMembership Load","connection_id":18564460,"statement_name":null,"binds":[],"line":435,"filename":"/root/sharetriberepo/app/models/person.rb","method":"is_marketplace_admin?"},"time":"2016-05-16T11:29:07.904+00:00","transaction_id":"5a978a9093b5214652de","end":"2016-05-16T11:29:07.907+00:00","children":[],"duration":2.668092},{"name":"sql.active_record","payload":{"sql":"SELECT  `payment_settings`.* FROM `payment_settings` WHERE `payment_settings`.`community_id` = 1 AND `payment_settings`.`active` = 1  ORDER BY `payment_settings`.`id` ASC LIMIT 1","name":"PaymentSettings Load","connection_id":18564460,"statement_name":null,"binds":[],"line":54,"filename":"/root/sharetriberepo/app/services/transaction_service/store/payment_settings.rb","method":"get_active"},"time":"2016-05-16T11:29:07.913+00:00","transaction_id":"5a978a9093b5214652de","end":"2016-05-16T11:29:07.913+00:00","children":[],"duration":0.707808},{"name":"sql.active_record","payload":{"sql":"SELECT COUNT(*) AS count_all, priority AS priority FROM `delayed_jobs` WHERE (attempts \u003c 3 AND run_at \u003c '2016-05-16 11:29:07.917992') GROUP BY `delayed_jobs`.`priority`","name":null,"connection_id":18564460,"statement_name":null,"binds":[],"line":33,"filename":"/root/sharetriberepo/app/services/monitoring_service/monitoring.rb","method":"report_queue_size"},"time":"2016-05-16T11:29:07.918+00:00","transaction_id":"5a978a9093b5214652de","end":"2016-05-16T11:29:07.921+00:00","children":[],"duration":2.3186600000000004},{"name":"sql.active_record","payload":{"sql":"SELECT  `communities`.* FROM `communities` INNER JOIN `community_memberships` ON `communities`.`id` = `community_memberships`.`community_id` WHERE `community_memberships`.`person_id` = '6IXSNFhhCRFcUfrUXrknbQ' AND (community_memberships.status= 'accepted') LIMIT 1","name":"Community Load","connection_id":18564460,"statement_name":null,"binds":[],"line":213,"filename":"/root/sharetriberepo/app/controllers/application_controller.rb","method":"ensure_user_belongs_to_community"},"time":"2016-05-16T11:29:07.926+00:00","transaction_id":"5a978a9093b5214652de","end":"2016-05-16T11:29:07.926+00:00","children":[],"duration":0.613382},{"name":"sql.active_record","payload":{"sql":"SELECT  `transactions`.* FROM `transactions` INNER JOIN `listings` ON `listings`.`id` = `transactions`.`listing_id` WHERE `transactions`.`id` = 2 AND `transactions`.`deleted` = 0 AND `transactions`.`community_id` = 1 AND (starter_id = '6IXSNFhhCRFcUfrUXrknbQ' OR listings.author_id = '6IXSNFhhCRFcUfrUXrknbQ')  ORDER BY `transactions`.`id` ASC LIMIT 1","name":"Transaction Load","connection_id":18564460,"statement_name":null,"binds":[],"line":260,"filename":"/root/sharetriberepo/app/services/marketplace_service/transaction.rb","method":"transaction_with_conversation"},"time":"2016-05-16T11:29:07.934+00:00","transaction_id":"5a978a9093b5214652de","end":"2016-05-16T11:29:07.935+00:00","children":[],"duration":1.210027},{"name":"sql.active_record","payload":{"sql":"SELECT `bookings`.* FROM `bookings` WHERE `bookings`.`transaction_id` IN (2)","name":"Booking Load","connection_id":18564460,"statement_name":null,"binds":[],"line":260,"filename":"/root/sharetriberepo/app/services/marketplace_service/transaction.rb","method":"transaction_with_conversation"},"time":"2016-05-16T11:29:07.941+00:00","transaction_id":"5a978a9093b5214652de","end":"2016-05-16T11:29:07.942+00:00","children":[],"duration":0.6369130000000001},{"name":"sql.active_record","payload":{"sql":"SELECT  `listings`.* FROM `listings` WHERE `listings`.`id` = 32 LIMIT 1","name":"Listing Load","connection_id":18564460,"statement_name":null,"binds":[],"line":81,"filename":"/root/sharetriberepo/app/services/marketplace_service/transaction.rb","method":"transaction"},"time":"2016-05-16T11:29:07.946+00:00","transaction_id":"5a978a9093b5214652de","end":"2016-05-16T11:29:07.948+00:00","children":[],"duration":1.675762},{"name":"sql.active_record","payload":{"sql":"SELECT  `transaction_transitions`.* FROM `transaction_transitions` WHERE `transaction_transitions`.`transaction_id` = 2  ORDER BY `transaction_transitions`.`id` DESC LIMIT 1","name":"TransactionTransition Load","connection_id":18564460,"statement_name":null,"binds":[],"line":88,"filename":"/root/sharetriberepo/app/services/marketplace_service/transaction.rb","method":"transaction"},"time":"2016-05-16T11:29:07.955+00:00","transaction_id":"5a978a9093b5214652de","end":"2016-05-16T11:29:07.956+00:00","children":[],"duration":0.587134},{"name":"sql.active_record","payload":{"sql":"SELECT `testimonials`.* FROM `testimonials` WHERE `testimonials`.`transaction_id` = 2","name":"Testimonial Load","connection_id":18564460,"statement_name":null,"binds":[],"line":90,"filename":"/root/sharetriberepo/app/services/marketplace_service/transaction.rb","method":"transaction"},"time":"2016-05-16T11:29:07.961+00:00","transaction_id":"5a978a9093b5214652de","end":"2016-05-16T11:29:07.961+00:00","children":[],"duration":0.508053},{"name":"sql.active_record","payload":{"sql":"SELECT `transaction_transitions`.* FROM `transaction_transitions` WHERE `transaction_transitions`.`transaction_id` = 2","name":"TransactionTransition Load","connection_id":18564460,"statement_name":null,"binds":[],"line":94,"filename":"/root/sharetriberepo/app/services/marketplace_service/transaction.rb","method":"transaction"},"time":"2016-05-16T11:29:07.964+00:00","transaction_id":"5a978a9093b5214652de","end":"2016-05-16T11:29:07.965+00:00","children":[],"duration":0.499668},{"name":"sql.active_record","payload":{"sql":"SELECT  `conversations`.* FROM `conversations` WHERE `conversations`.`id` = 1 LIMIT 1","name":"Conversation Load","connection_id":18564460,"statement_name":null,"binds":[],"line":105,"filename":"/root/sharetriberepo/app/services/marketplace_service/transaction.rb","method":"transaction_with_conversation"},"time":"2016-05-16T11:29:07.969+00:00","transaction_id":"5a978a9093b5214652de","end":"2016-05-16T11:29:07.970+00:00","children":[],"duration":0.500919},{"name":"sql.active_record","payload":{"sql":"SELECT  `listings`.* FROM `listings` WHERE `listings`.`id` = 32 LIMIT 1","binds":[[{"strict":true,"collation":null,"extra":"auto_increment","name":"id","cast_type":{"precision":null,"scale":null,"limit":4,"range":"-2147483648...2147483648"},"sql_type":"int(11)","null":false,"default":null,"default_function":null},32]],"name":"CACHE","connection_id":18564460,"line":35,"filename":"/root/sharetriberepo/app/services/marketplace_service/conversation.rb","method":"conversation"},"time":"2016-05-16T11:29:08.028+00:00","transaction_id":"7024875df97c8a19042b","end":"2016-05-16T11:29:08.029+00:00","children":[],"duration":0.443942},{"name":"sql.active_record","payload":{"sql":"SELECT `messages`.* FROM `messages` WHERE `messages`.`conversation_id` = 1","name":"Message Load","connection_id":18564460,"statement_name":null,"binds":[],"line":52,"filename":"/root/sharetriberepo/app/services/marketplace_service/conversation.rb","method":"messages"},"time":"2016-05-16T11:29:08.031+00:00","transaction_id":"5a978a9093b5214652de","end":"2016-05-16T11:29:08.032+00:00","children":[],"duration":0.5551240000000001},{"name":"sql.active_record","payload":{"sql":"SELECT  `people`.* FROM `people` WHERE `people`.`id` = 'Mv7DsWSUM9EAycvAicHkBw' LIMIT 1","name":"Person Load","connection_id":18564460,"statement_name":null,"binds":[],"line":62,"filename":"/root/sharetriberepo/app/services/marketplace_service/conversation.rb","method":"message"},"time":"2016-05-16T11:29:08.034+00:00","transaction_id":"5a978a9093b5214652de","end":"2016-05-16T11:29:08.035+00:00","children":[],"duration":0.647708},{"name":"sql.active_record","payload":{"sql":"SELECT `participations`.* FROM `participations` WHERE `participations`.`conversation_id` = 1","name":"Participation Load","connection_id":18564460,"statement_name":null,"binds":[],"line":109,"filename":"/root/sharetriberepo/app/models/conversation.rb","method":"starter"},"time":"2016-05-16T11:29:08.037+00:00","transaction_id":"5a978a9093b5214652de","end":"2016-05-16T11:29:08.038+00:00","children":[],"duration":0.473918},{"name":"sql.active_record","payload":{"sql":"SELECT  `people`.* FROM `people` WHERE `people`.`id` = 'Mv7DsWSUM9EAycvAicHkBw' LIMIT 1","binds":[[{"strict":true,"collation":"utf8_unicode_ci","extra":"","name":"id","cast_type":{"precision":null,"scale":null,"limit":22},"sql_type":"varchar(22)","null":false,"default":null,"default_function":null},"Mv7DsWSUM9EAycvAicHkBw"]],"name":"CACHE","connection_id":18564460,"line":109,"filename":"/root/sharetriberepo/app/models/conversation.rb","method":"starter"},"time":"2016-05-16T11:29:08.040+00:00","transaction_id":"7024875df97c8a19042b","end":"2016-05-16T11:29:08.040+00:00","children":[],"duration":0.334375},{"name":"sql.active_record","payload":{"sql":"SELECT `people`.* FROM `people` INNER JOIN `participations` ON `people`.`id` = `participations`.`person_id` WHERE `participations`.`conversation_id` = 1","name":"Person Load","connection_id":18564460,"statement_name":null,"binds":[],"line":85,"filename":"/root/sharetriberepo/app/models/conversation.rb","method":"other_party"},"time":"2016-05-16T11:29:08.044+00:00","transaction_id":"5a978a9093b5214652de","end":"2016-05-16T11:29:08.045+00:00","children":[],"duration":0.9384760000000001},{"name":"sql.active_record","payload":{"sql":"SELECT  `transactions`.* FROM `transactions` WHERE `transactions`.`id` = 2 AND `transactions`.`community_id` = 1 AND `transactions`.`deleted` = 0  ORDER BY `transactions`.`id` ASC LIMIT 1","name":"Transaction Load","connection_id":18564460,"statement_name":null,"binds":[],"line":114,"filename":"/root/sharetriberepo/app/services/transaction_service/store/transaction.rb","method":"get_in_community"},"time":"2016-05-16T11:29:08.048+00:00","transaction_id":"5a978a9093b5214652de","end":"2016-05-16T11:29:08.049+00:00","children":[],"duration":0.462037},{"name":"sql.active_record","payload":{"sql":"SELECT  `shipping_addresses`.* FROM `shipping_addresses` WHERE `shipping_addresses`.`transaction_id` = 2 LIMIT 1","name":"ShippingAddress Load","connection_id":18564460,"statement_name":null,"binds":[],"line":159,"filename":"/root/sharetriberepo/app/services/transaction_service/store/transaction.rb","method":"add_opt_shipping_address"},"time":"2016-05-16T11:29:08.051+00:00","transaction_id":"5a978a9093b5214652de","end":"2016-05-16T11:29:08.052+00:00","children":[],"duration":0.482504},{"name":"sql.active_record","payload":{"sql":"SELECT  `bookings`.* FROM `bookings` WHERE `bookings`.`transaction_id` = 2 LIMIT 1","name":"Booking Load","connection_id":18564460,"statement_name":null,"binds":[],"line":167,"filename":"/root/sharetriberepo/app/services/transaction_service/store/transaction.rb","method":"add_opt_booking"},"time":"2016-05-16T11:29:08.054+00:00","transaction_id":"5a978a9093b5214652de","end":"2016-05-16T11:29:08.054+00:00","children":[],"duration":0.574693},{"name":"sql.active_record","payload":{"sql":"SELECT  `transactions`.* FROM `transactions` WHERE `transactions`.`id` = 2  ORDER BY `transactions`.`id` ASC LIMIT 1","name":"Transaction Load","connection_id":18564460,"statement_name":null,"binds":[],"line":132,"filename":"/root/sharetriberepo/app/controllers/transactions_controller.rb","method":"show"},"time":"2016-05-16T11:29:08.057+00:00","transaction_id":"5a978a9093b5214652de","end":"2016-05-16T11:29:08.058+00:00","children":[],"duration":0.478411},{"name":"sql.active_record","payload":{"sql":"SELECT  `listings`.* FROM `listings` WHERE `listings`.`id` = 32  ORDER BY `listings`.`id` ASC LIMIT 1","name":"Listing Load","connection_id":18564460,"statement_name":null,"binds":[],"line":134,"filename":"/root/sharetriberepo/app/controllers/transactions_controller.rb","method":"show"},"time":"2016-05-16T11:29:08.060+00:00","transaction_id":"5a978a9093b5214652de","end":"2016-05-16T11:29:08.060+00:00","children":[],"duration":0.513523},{"name":"sql.active_record","payload":{"sql":"SELECT  `transactions`.* FROM `transactions` WHERE `transactions`.`id` = 2 LIMIT 1","name":"Transaction Load","connection_id":18564460,"statement_name":null,"binds":[],"line":195,"filename":"/root/sharetriberepo/app/services/marketplace_service/transaction.rb","method":"mark_as_seen_by_current"},"time":"2016-05-16T11:29:08.063+00:00","transaction_id":"5a978a9093b5214652de","end":"2016-05-16T11:29:08.063+00:00","children":[],"duration":0.43340799999999996},{"name":"sql.active_record","payload":{"sql":"SELECT  `conversations`.* FROM `conversations` WHERE `conversations`.`id` = 1 LIMIT 1","binds":[[{"strict":true,"collation":null,"extra":"auto_increment","name":"id","cast_type":{"precision":null,"scale":null,"limit":4,"range":"-2147483648...2147483648"},"sql_type":"int(11)","null":false,"default":null,"default_function":null},1]],"name":"CACHE","connection_id":18564460,"line":197,"filename":"/root/sharetriberepo/app/services/marketplace_service/transaction.rb","method":"mark_as_seen_by_current"},"time":"2016-05-16T11:29:08.065+00:00","transaction_id":"7024875df97c8a19042b","end":"2016-05-16T11:29:08.065+00:00","children":[],"duration":0.312014},{"name":"sql.active_record","payload":{"sql":"UPDATE `participations` SET `participations`.`is_read` = 1 WHERE `participations`.`conversation_id` = 1 AND (person_id = '6IXSNFhhCRFcUfrUXrknbQ')","name":"SQL","connection_id":18564460,"statement_name":null,"binds":[],"line":199,"filename":"/root/sharetriberepo/app/services/marketplace_service/transaction.rb","method":"mark_as_seen_by_current"},"time":"2016-05-16T11:29:08.068+00:00","transaction_id":"5a978a9093b5214652de","end":"2016-05-16T11:29:08.070+00:00","children":[],"duration":1.457273},{"name":"render_partial.action_view","payload":{"identifier":"/root/sharetriberepo/app/views/conversations/_conversation_header.haml"},"time":"2016-05-16T11:29:08.075+00:00","transaction_id":"7024875df97c8a19042b","end":"2016-05-16T11:29:08.076+00:00","children":[],"duration":1.4184759999999998},{"name":"render_partial.action_view","payload":{"identifier":"/root/sharetriberepo/app/views/transactions/_price_break_down.haml"},"time":"2016-05-16T11:29:08.077+00:00","transaction_id":"7024875df97c8a19042b","end":"2016-05-16T11:29:08.078+00:00","children":[],"duration":0.6625920000000001},{"name":"render_partial.action_view","payload":{"identifier":"/root/sharetriberepo/app/views/transactions/_shipping_address.haml"},"time":"2016-05-16T11:29:08.079+00:00","transaction_id":"7024875df97c8a19042b","end":"2016-05-16T11:29:08.079+00:00","children":[],"duration":0.144654},{"name":"sql.active_record","payload":{"sql":"SELECT  `listings`.* FROM `listings` WHERE `listings`.`id` = 32 LIMIT 1","name":"Listing Load","connection_id":18564460,"statement_name":null,"binds":[],"line":213,"filename":"/root/sharetriberepo/app/helpers/transaction_helper.rb","method":"get_conversation_statuses"},"time":"2016-05-16T11:29:08.080+00:00","transaction_id":"5a978a9093b5214652de","end":"2016-05-16T11:29:08.081+00:00","children":[],"duration":0.7522819999999999},{"name":"render_partial.action_view","payload":{"identifier":"/root/sharetriberepo/app/views/transactions/status/_status.haml"},"time":"2016-05-16T11:29:08.079+00:00","transaction_id":"7024875df97c8a19042b","end":"2016-05-16T11:29:08.083+00:00","children":[],"duration":4.1624},{"name":"render_partial.action_view","payload":{"identifier":"/root/sharetriberepo/app/views/transactions/_details.haml"},"time":"2016-05-16T11:29:08.077+00:00","transaction_id":"7024875df97c8a19042b","end":"2016-05-16T11:29:08.084+00:00","children":[],"duration":7.008979999999999},{"name":"render_partial.action_view","payload":{"identifier":"/root/sharetriberepo/app/views/conversations/_messages_and_form.haml"},"time":"2016-05-16T11:29:08.084+00:00","transaction_id":"7024875df97c8a19042b","end":"2016-05-16T11:29:08.089+00:00","children":[],"duration":4.763608},{"name":"render_template.action_view","payload":{"identifier":"/root/sharetriberepo/app/views/transactions/show.haml","layout":"layouts/application"},"time":"2016-05-16T11:29:08.074+00:00","transaction_id":"7024875df97c8a19042b","end":"2016-05-16T11:29:08.089+00:00","children":[],"duration":15.417586},{"name":"render_partial.action_view","payload":{"identifier":"/root/sharetriberepo/app/views/layouts/_kissmetrics.haml"},"time":"2016-05-16T11:29:08.090+00:00","transaction_id":"7024875df97c8a19042b","end":"2016-05-16T11:29:08.090+00:00","children":[],"duration":0.160173},{"name":"render_partial.action_view","payload":{"identifier":"/root/sharetriberepo/app/views/layouts/_google_analytics_script.haml"},"time":"2016-05-16T11:29:08.091+00:00","transaction_id":"7024875df97c8a19042b","end":"2016-05-16T11:29:08.091+00:00","children":[],"duration":0.156868},{"name":"sql.active_record","payload":{"sql":"SELECT  `community_customizations`.* FROM `community_customizations` WHERE `community_customizations`.`community_id` = 1 AND `community_customizations`.`locale` = 'en'  ORDER BY `community_customizations`.`id` ASC LIMIT 1","name":"CommunityCustomization Load","connection_id":18564460,"statement_name":null,"binds":[],"line":277,"filename":"/root/sharetriberepo/app/models/community.rb","method":"name"},"time":"2016-05-16T11:29:08.093+00:00","transaction_id":"5a978a9093b5214652de","end":"2016-05-16T11:29:08.094+00:00","children":[],"duration":0.722688},{"name":"sql.active_record","payload":{"sql":"SELECT  `community_customizations`.* FROM `community_customizations` WHERE `community_customizations`.`community_id` = 1 AND `community_customizations`.`locale` = 'en'  ORDER BY `community_customizations`.`id` ASC LIMIT 1","binds":[[{"strict":true,"collation":null,"extra":"","name":"community_id","cast_type":{"precision":null,"scale":null,"limit":4,"range":"-2147483648...2147483648"},"sql_type":"int(11)","null":true,"default":null,"default_function":null},1],[{"strict":true,"collation":"utf8_unicode_ci","extra":"","name":"locale","cast_type":{"precision":null,"scale":null,"limit":255},"sql_type":"varchar(255)","null":true,"default":null,"default_function":null},"en"]],"name":"CACHE","connection_id":18564460,"line":277,"filename":"/root/sharetriberepo/app/models/community.rb","method":"name"},"time":"2016-05-16T11:29:08.097+00:00","transaction_id":"7024875df97c8a19042b","end":"2016-05-16T11:29:08.098+00:00","children":[],"duration":0.431828},{"name":"sql.active_record","payload":{"sql":"SELECT  `community_customizations`.* FROM `community_customizations` WHERE `community_customizations`.`community_id` = 1 AND `community_customizations`.`locale` = 'en'  ORDER BY `community_customizations`.`id` ASC LIMIT 1","binds":[[{"strict":true,"collation":null,"extra":"","name":"community_id","cast_type":{"precision":null,"scale":null,"limit":4,"range":"-2147483648...2147483648"},"sql_type":"int(11)","null":true,"default":null,"default_function":null},1],[{"strict":true,"collation":"utf8_unicode_ci","extra":"","name":"locale","cast_type":{"precision":null,"scale":null,"limit":255},"sql_type":"varchar(255)","null":true,"default":null,"default_function":null},"en"]],"name":"CACHE","connection_id":18564460,"line":277,"filename":"/root/sharetriberepo/app/models/community.rb","method":"name"},"time":"2016-05-16T11:29:08.102+00:00","transaction_id":"7024875df97c8a19042b","end":"2016-05-16T11:29:08.102+00:00","children":[],"duration":0.408022},{"name":"sql.active_record","payload":{"sql":"SELECT  `community_customizations`.* FROM `community_customizations` WHERE `community_customizations`.`community_id` = 1 AND `community_customizations`.`locale` = 'en'  ORDER BY `community_customizations`.`id` ASC LIMIT 1","binds":[[{"strict":true,"collation":null,"extra":"","name":"community_id","cast_type":{"precision":null,"scale":null,"limit":4,"range":"-2147483648...2147483648"},"sql_type":"int(11)","null":true,"default":null,"default_function":null},1],[{"strict":true,"collation":"utf8_unicode_ci","extra":"","name":"locale","cast_type":{"precision":null,"scale":null,"limit":255},"sql_type":"varchar(255)","null":true,"default":null,"default_function":null},"en"]],"name":"CACHE","connection_id":18564460,"line":277,"filename":"/root/sharetriberepo/app/models/community.rb","method":"name"},"time":"2016-05-16T11:29:08.105+00:00","transaction_id":"7024875df97c8a19042b","end":"2016-05-16T11:29:08.106+00:00","children":[],"duration":0.376563},{"name":"render_partial.action_view","payload":{"identifier":"/root/sharetriberepo/app/views/layouts/_marketplace_head.haml"},"time":"2016-05-16T11:29:08.092+00:00","transaction_id":"7024875df97c8a19042b","end":"2016-05-16T11:29:08.113+00:00","children":[],"duration":20.664234},{"name":"render_partial.action_view","payload":{"identifier":"/root/sharetriberepo/app/views/layouts/_head.haml"},"time":"2016-05-16T11:29:08.090+00:00","transaction_id":"7024875df97c8a19042b","end":"2016-05-16T11:29:08.113+00:00","children":[],"duration":23.277789},{"name":"sql.active_record","payload":{"sql":"SELECT `participations`.`conversation_id` FROM `participations` WHERE `participations`.`person_id` = '6IXSNFhhCRFcUfrUXrknbQ'","name":null,"connection_id":18564460,"statement_name":null,"binds":[],"line":108,"filename":"/root/sharetriberepo/app/services/marketplace_service/inbox.rb","method":"query_notification_count"},"time":"2016-05-16T11:29:08.117+00:00","transaction_id":"5a978a9093b5214652de","end":"2016-05-16T11:29:08.118+00:00","children":[],"duration":1.0189419999999998},{"name":"sql.active_record","payload":{"sql":"\n          SELECT COUNT(conversations.id) FROM conversations\n\n          LEFT JOIN transactions      ON transactions.conversation_id = conversations.id\n          LEFT JOIN listings          ON transactions.listing_id = listings.id\n          LEFT JOIN testimonials      ON (testimonials.transaction_id = transactions.id AND testimonials.author_id = '6IXSNFhhCRFcUfrUXrknbQ')\n          LEFT JOIN participations    ON (participations.conversation_id = conversations.id AND participations.person_id = '6IXSNFhhCRFcUfrUXrknbQ')\n\n          # Where person and community\n          WHERE conversations.community_id = 1\n          AND conversations.id IN (1)\n\n          # Ignore initiated and deleted\n          AND (\n            transactions.id IS NULL\n            OR (transactions.current_state != 'initiated'\n                AND transactions.deleted = 0)\n          )\n\n          # This is a bit complicated logic that is now moved from app to SQL.\n          # I'm not complelety sure if it's a good or bad. However, since this query is called once per every page\n          # load, I think it's ok to make some performance optimizations and have this logic in SQL.\n          AND (\n            # Is read?\n            (participations.is_read = FALSE) OR\n\n            # Requires actions\n            ((transactions.current_state = 'pending' OR transactions.current_state = 'preauthorized') AND participations.is_starter = FALSE) OR\n            ((transactions.current_state = 'accepted' OR transactions.current_state = 'paid')         AND participations.is_starter = TRUE) OR\n\n            # Waiting feedback\n            ((transactions.current_state = 'confirmed') AND (\n              (participations.is_starter = TRUE AND transactions.starter_skipped_feedback = FALSE AND testimonials.id IS NULL) OR\n              (participations.is_starter = FALSE AND transactions.author_skipped_feedback = FALSE AND testimonials.id IS NULL)\n            ))\n          )\n        ","name":null,"connection_id":18564460,"statement_name":null,"binds":[],"line":118,"filename":"/root/sharetriberepo/app/services/marketplace_service/inbox.rb","method":"query_notification_count"},"time":"2016-05-16T11:29:08.119+00:00","transaction_id":"5a978a9093b5214652de","end":"2016-05-16T11:29:08.120+00:00","children":[],"duration":1.1241210000000001},{"name":"render_partial.action_view","payload":{"identifier":"/root/sharetriberepo/app/views/layouts/_header_anchors.haml"},"time":"2016-05-16T11:29:08.123+00:00","transaction_id":"7024875df97c8a19042b","end":"2016-05-16T11:29:08.124+00:00","children":[],"duration":1.327135},{"name":"render_partial.action_view","payload":{"identifier":"/root/sharetriberepo/app/views/layouts/_header_user_menu.haml"},"time":"2016-05-16T11:29:08.125+00:00","transaction_id":"7024875df97c8a19042b","end":"2016-05-16T11:29:08.128+00:00","children":[],"duration":2.878555},{"name":"render_partial.action_view","payload":{"identifier":"/root/sharetriberepo/app/views/layouts/_header_right_visible_tablet.haml"},"time":"2016-05-16T11:29:08.128+00:00","transaction_id":"7024875df97c8a19042b","end":"2016-05-16T11:29:08.129+00:00","children":[],"duration":0.656851},{"name":"sql.active_record","payload":{"sql":"SELECT `menu_links`.* FROM `menu_links` WHERE `menu_links`.`community_id` = 1  ORDER BY sort_priority","name":"MenuLink Load","connection_id":18564460,"statement_name":null,"binds":[],"line":24,"filename":"/root/sharetriberepo/app/views/layouts/_header_menu.haml","method":"_app_views_layouts__header_menu_haml___88728714528797189_45903560"},"time":"2016-05-16T11:29:08.133+00:00","transaction_id":"5a978a9093b5214652de","end":"2016-05-16T11:29:08.134+00:00","children":[],"duration":0.895829},{"name":"render_partial.action_view","payload":{"identifier":"/root/sharetriberepo/app/views/layouts/_header_menu.haml"},"time":"2016-05-16T11:29:08.130+00:00","transaction_id":"7024875df97c8a19042b","end":"2016-05-16T11:29:08.136+00:00","children":[],"duration":6.709265},{"name":"render_partial.action_view","payload":{"identifier":"/root/sharetriberepo/app/views/layouts/_global_header.haml"},"time":"2016-05-16T11:29:08.114+00:00","transaction_id":"7024875df97c8a19042b","end":"2016-05-16T11:29:08.137+00:00","children":[],"duration":22.90568},{"name":"render_partial.action_view","payload":{"identifier":"/root/sharetriberepo/app/views/layouts/_notifications.haml"},"time":"2016-05-16T11:29:08.138+00:00","transaction_id":"7024875df97c8a19042b","end":"2016-05-16T11:29:08.138+00:00","children":[],"duration":0.24304900000000002},{"name":"render_partial.action_view","payload":{"identifier":"/root/sharetriberepo/app/views/layouts/_facebook_sdk.haml"},"time":"2016-05-16T11:29:08.139+00:00","transaction_id":"7024875df97c8a19042b","end":"2016-05-16T11:29:08.140+00:00","children":[],"duration":0.423371},{"name":"render_partial.action_view","payload":{"identifier":"/root/sharetriberepo/app/views/layouts/_noscript.haml"},"time":"2016-05-16T11:29:08.141+00:00","transaction_id":"7024875df97c8a19042b","end":"2016-05-16T11:29:08.141+00:00","children":[],"duration":0.514483},{"name":"process_action.action_controller","payload":{"controller":"TransactionsController","action":"show","params":{"controller":"transactions","action":"show","locale":"en","person_id":"user4","id":"2"},"format":"html","method":"GET","path":"/en/user4/transactions/2","status":200,"view_runtime":67.35805902424741,"db_runtime":13.949435000000001,"host":"commerce.codingstack.com","community_id":1,"current_user_id":"6IXSNFhhCRFcUfrUXrknbQ","request_uuid":"91715322-b640-4ab6-b5c3-5475e080a31b"},"time":"2016-05-16T11:29:07.831+00:00","transaction_id":"7024875df97c8a19042b","end":"2016-05-16T11:29:08.142+00:00","children":[],"duration":310.914704}]